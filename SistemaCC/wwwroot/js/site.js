// Please see documentation at https://docs.microsoft.com/aspnet/core/client-side/bundling-and-minification
// for details on configuring this project to bundle and minify static web assets.

// Write your JavaScript code.
function tabs(seccion)
{
    //Activar o desactivar los div indicados
    var activo = document.getElementsByClassName("seccion-activa")
    $(activo).addClass("seccion-inactiva")
    $(activo).removeClass("seccion-activa")
    $("#Seccion" + seccion).addClass("seccion-activa")
    $("#Seccion" + seccion).removeClass("seccion-inactiva")
    //Asignar las clases a los links para dar el efecto y saber en que sección está posicionado
    var link = document.getElementsByClassName("active")
    $(link).addClass("inactivo")
    $(link).removeClass("active")
    $("#Link" + seccion).addClass("active")
    $("#Link" + seccion).removeClass("inactivo")
}
//Funcion para contador de caracteres
function contar(posicion)
{
    var contadores = document.getElementsByClassName("contador")
    var conteo = $(contadores[posicion]).val()
    var div_conteo = document.getElementById("conteo-" + posicion)
    var texto_viejo = div_conteo.children[0]
    div_conteo.removeChild(texto_viejo)
    var algo = contadores[posicion].getAttribute("maxlength")
    var div = document.createElement("div")
    var texto_nuevo = document.createTextNode("Caracteres: " + conteo.length + "/" + algo)
    div.appendChild(texto_nuevo)
    div_conteo.appendChild(div)
}
//Funciones para agregar y quitar campos dinamicos
function actividad_agregar(id)
{
    //Asigar id a la nueva fila
    var id_ = parseInt(id) + 1
    var campos_dos = document.createElement("div")
    var campos_dos_kai = document.createElement("div")
    var campos_tres = document.createElement("div")
    var campos_ultimos_1 = document.createElement("div")
    var campos_ultimos_2 = document.createElement("div")
    var campos_ultimos_3 = document.createElement("div")
    var campos_ultimos_4 = document.createElement("div")
    var campos_ultimos_5 = document.createElement("div")
    var actividad_numeracion = document.createElement("div")
    var quitar = document.createElement("div")
    var input1 = document.createElement("input")
    var textarea1 = document.createElement("textarea")
    var textarea2 = document.createElement("textarea")
    var cerrar = document.createElement("a")
    var numeracion = document.createTextNode("A" + id_)
    var cerrar_x = document.createTextNode("X")
    var contenedor = document.getElementById("actividades_contenedor")
    //Add atributos y clases
    campos_dos.setAttribute("id", "actividad" + id_)
    $(campos_dos).addClass("campos campos_dos")
    $(campos_dos_kai).addClass("campos campos_dos_kai")
    $(campos_tres).addClass("campos campos_tres")
    campos_ultimos_1.setAttribute("name","actividad")
    $(campos_ultimos_1).addClass("campos campos_ultimos numeracion")
    $(campos_ultimos_2).addClass("campos campos_ultimos")
    $(campos_ultimos_3).addClass("campos campos_ultimos")
    $(campos_ultimos_4).addClass("campos campos_ultimos")
    $(campos_ultimos_5).addClass("campos campos_ultimos")
    $(quitar).addClass("quitar")
    textarea1.setAttribute("name", "actividades_prev_descripcion")
    textarea1.setAttribute("placeholder", "Descripción")
    textarea1.setAttribute("required", "required")
    $(textarea1).addClass("form-control")
    textarea2.setAttribute("name", "actividades_prev_observaciones")
    textarea2.setAttribute("placeholder", "Observaciones")
    textarea2.setAttribute("required", "required")
    $(textarea2).addClass("form-control")
    input1.setAttribute("name", "actividades_prev_fecha")
    input1.setAttribute("type","date")
    input1.setAttribute("required", "required")
    $(input1).addClass("form-control")
    cerrar.setAttribute("href", "#")
    cerrar.setAttribute("onclick", "quitar('actividad"+ id_ + "')")
    $(cerrar).addClass("btn btn-outline-danger")
    //Agregar los nodos conforme al arbol 
    actividad_numeracion.appendChild(numeracion)
    cerrar.appendChild(cerrar_x)
    quitar.appendChild(cerrar)
    campos_ultimos_1.appendChild(actividad_numeracion)
    campos_ultimos_2.appendChild(textarea1)
    campos_ultimos_3.appendChild(textarea2)
    campos_ultimos_4.appendChild(input1)
    campos_ultimos_5.appendChild(quitar)
    campos_dos_kai.appendChild(campos_ultimos_1)
    campos_dos_kai.appendChild(campos_ultimos_2)
    campos_tres.appendChild(campos_ultimos_3)
    campos_tres.appendChild(campos_ultimos_4)
    campos_tres.appendChild(campos_ultimos_5)
    campos_dos.appendChild(campos_dos_kai)
    campos_dos.appendChild(campos_tres)
    contenedor.appendChild(campos_dos)
    //cambiar el campo del atributo onclick para mantener la númeración
    var aa = document.getElementById("actividad_agregar")
    aa.removeAttribute("onclick")
    aa.setAttribute("onclick","actividad_agregar('"+id_+"')")
}
function actividad_cc_agregar(id) {
    //Asigar id a la nueva fila
    var id_ = parseInt(id) + 1
    var campos_dos = document.createElement("div")
    var campos_dos_kai = document.createElement("div")
    var campos_tres = document.createElement("div")
    var campos_ultimos_1 = document.createElement("div")
    var campos_ultimos_2 = document.createElement("div")
    var campos_ultimos_3 = document.createElement("div")
    var campos_ultimos_4 = document.createElement("div")
    var campos_ultimos_5 = document.createElement("div")
    var actividad_numeracion = document.createElement("div")
    var quitar = document.createElement("div")
    var input1 = document.createElement("input")
    var textarea1 = document.createElement("textarea")
    var textarea2 = document.createElement("textarea")
    var cerrar = document.createElement("a")
    var numeracion = document.createTextNode("A" + id_)
    var cerrar_x = document.createTextNode("X")
    var contenedor = document.getElementById("actividades_cc_contenedor")
    //Add atributos y clases
    campos_dos.setAttribute("id", "actividad_cc" + id_)
    $(campos_dos).addClass("campos campos_dos")
    $(campos_dos_kai).addClass("campos campos_dos_kai")
    $(campos_tres).addClass("campos campos_tres")
    campos_ultimos_1.setAttribute("name", "actividad_cc")
    $(campos_ultimos_1).addClass("campos campos_ultimos numeracion")
    $(campos_ultimos_2).addClass("campos campos_ultimos")
    $(campos_ultimos_3).addClass("campos campos_ultimos")
    $(campos_ultimos_4).addClass("campos campos_ultimos")
    $(campos_ultimos_5).addClass("campos campos_ultimos")
    $(quitar).addClass("quitar")
    textarea1.setAttribute("name", "actividades_cc_descripcion")
    textarea1.setAttribute("placeholder", "Descripción")
    textarea1.setAttribute("required", "required")
    $(textarea1).addClass("form-control")
    textarea2.setAttribute("name", "actividades_cc_observaciones")
    textarea2.setAttribute("placeholder", "Observaciones")
    textarea2.setAttribute("required", "required")
    $(textarea2).addClass("form-control")
    input1.setAttribute("name", "actividades_cc_fecha")
    input1.setAttribute("type", "date")
    input1.setAttribute("required", "required")
    $(input1).addClass("form-control")
    cerrar.setAttribute("href", "#")
    cerrar.setAttribute("onclick", "quitar('actividad_cc" + id_ + "')")
    $(cerrar).addClass("btn btn-outline-danger")
    //Agregar los nodos conforme al arbol 
    actividad_numeracion.appendChild(numeracion)
    cerrar.appendChild(cerrar_x)
    quitar.appendChild(cerrar)
    campos_ultimos_1.appendChild(actividad_numeracion)
    campos_ultimos_2.appendChild(textarea1)
    campos_ultimos_3.appendChild(textarea2)
    campos_ultimos_4.appendChild(input1)
    campos_ultimos_5.appendChild(quitar)
    campos_dos_kai.appendChild(campos_ultimos_1)
    campos_dos_kai.appendChild(campos_ultimos_2)
    campos_tres.appendChild(campos_ultimos_3)
    campos_tres.appendChild(campos_ultimos_4)
    campos_tres.appendChild(campos_ultimos_5)
    campos_dos.appendChild(campos_dos_kai)
    campos_dos.appendChild(campos_tres)
    contenedor.appendChild(campos_dos)
    //cambiar el campo del atributo onclick para mantener la númeración
    var aa = document.getElementById("actividad_cc_agregar")
    aa.removeAttribute("onclick")
    aa.setAttribute("onclick", "actividad_cc_agregar('" + id_ + "')")
}
function quitar(id)
{
    var tipo = id.substr(0, id.length-1)
    //Decrementamos el id en 1 para tener conteo adecuado del tipo
    var aa = document.getElementById(tipo + "_agregar")
    var arg_str = aa.getAttribute("onclick")
    var id_ = parseInt(arg_str.substr(arg_str.length - 3, 1)) - 1
    aa.removeAttribute("onclick")
    aa.setAttribute("onclick", tipo + "_agregar('" + id_ + "')")
    //Eliminar
    var campos_dos = document.getElementById(id)
    campos_dos.remove()
    //Corregir numeración
    var numeracion = document.getElementsByName(tipo)
    var letter_A = tipo.charAt(0).toUpperCase()
    for (var i = id_ - 1; i >= 0; i--)
    {
        var actividad_numeracion = document.createElement("div")
        var texto1 = document.createTextNode(letter_A + (i + 1))
        var remover = numeracion[i].children[0]
        actividad_numeracion.appendChild(texto1)
        numeracion[i].removeChild(remover)
        numeracion[i].appendChild(actividad_numeracion)
    }
}